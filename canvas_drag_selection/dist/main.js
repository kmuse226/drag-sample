(()=>{const e=document.querySelector("#drag-box");let t={},l=!1;document.querySelector("canvas").addEventListener("mousedown",(e=>{l=!0,t.x=e.clientX,t.y=e.clientY})),document.querySelector("canvas").addEventListener("mousemove",(i=>{if(!l||i.clientX<0||i.clientY<0)return;const{clientX:n,clientY:s}=i,{x:o,y:c}=t,y=n-o,h=s-c;"1"!==e.style.opacity&&(e.style.opacity=.4),y<0?(e.style.left=n+"px",e.style.width=Math.abs(y)+"px"):(e.style.left=o+"px",e.style.width=y+"px"),h<0?(e.style.top=s+"px",e.style.height=Math.abs(h)+"px"):(e.style.top=c+"px",e.style.height=h+"px")})),e.addEventListener("mouseup",(t=>{console.log(t,"mouseup event"),l=!1,console.log(e.getBoundingClientRect()),e.style.opacity=0,e.style.width=0,e.style.height=0,console.log(n)}));const i=document.getElementById("canvas").getContext("2d"),n=[];n.push({x:10,y:100,width:30,height:30,fill:"#444444",isDragging:!1}),n.push({x:80,y:100,width:30,height:30,fill:"#ff550d",isDragging:!1}),n.push({x:150,y:100,r:10,fill:"#800080",isDragging:!1}),n.push({x:200,y:100,r:10,fill:"#0c64e8",isDragging:!1}),function(){for(let l=0;l<n.length;l++)n[l].width?(t=n[l],i.fillStyle=t.fill,i.fillRect(t.x,t.y,t.width,t.height)):(e=n[l],i.fillStyle=e.fill,i.beginPath(),i.arc(e.x,e.y,e.r,0,2*Math.PI),i.closePath(),i.fill());var e,t}()})();